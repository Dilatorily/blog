<!DOCTYPE html><html lang="en"><head><meta content="IE=edge" http-equiv="X-UA-Compatible"/><meta charSet="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><meta content="#ff7e71" name="theme-color"/><title>Huy Dang Lê-Ngô&#x27;s Blog</title><link href="/assets/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/><link href="/assets/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="/assets/android-chrome-192x192.png" rel="icon" sizes="192x192" type="image/png"/><link href="/assets/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link href="/assets/manifest.json" rel="manifest"/><link color="#ff7e71" href="/assets/safari-pinned-tab.svg" rel="mask-icon"/><meta content="Huy Dang Lê-Ngô&#x27;s Blog" name="apple-mobile-web-app-title"/><meta content="Huy Dang Lê-Ngô&#x27;s Blog" name="application-name"/><meta content="#ff7e71" name="msapplication-TileColor"/><meta content="/assets/mstile-144x144.png" name="msapplication-TileImage"/><style type="text/css">@font-face{font-family:Raleway;src:url(/assets/Raleway-Thin-QWWIQBAI.ttf) format("truetype");font-style:normal;font-weight:100;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-Thin-Italic-GW5WKNTK.ttf) format("truetype");font-style:italic;font-weight:100;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-ExtraLight-3NH5WSLB.ttf) format("truetype");font-style:normal;font-weight:200;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-ExtraLight-Italic-VH6T2AZA.ttf) format("truetype");font-style:italic;font-weight:200;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-Light-O7MLYXTZ.ttf) format("truetype");font-style:normal;font-weight:300;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-Light-Italic-FL4FXKFU.ttf) format("truetype");font-style:italic;font-weight:300;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-Regular-7ZFTV24D.ttf) format("truetype");font-style:normal;font-weight:400;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-Regular-Italic-P4AKR54A.ttf) format("truetype");font-style:italic;font-weight:400;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-Medium-JANZU7LG.ttf) format("truetype");font-style:normal;font-weight:500;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-Medium-Italic-O2OPEY43.ttf) format("truetype");font-style:italic;font-weight:500;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-SemiBold-B5STV64K.ttf) format("truetype");font-style:normal;font-weight:600;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-SemiBold-Italic-IRWDAEUH.ttf) format("truetype");font-style:italic;font-weight:600;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-Bold-3KTCC6VX.ttf) format("truetype");font-style:normal;font-weight:700;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-Bold-Italic-OHBNL7CI.ttf) format("truetype");font-style:italic;font-weight:700;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-ExtraBold-D4WQXBZX.ttf) format("truetype");font-style:normal;font-weight:800;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-ExtraBold-Italic-CS5JWRNY.ttf) format("truetype");font-style:italic;font-weight:800;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-Black-H5GVDTFN.ttf) format("truetype");font-style:normal;font-weight:900;text-rendering:optimizeLegibility}@font-face{font-family:Raleway;src:url(/assets/Raleway-Black-Italic-ZJGET35C.ttf) format("truetype");font-style:italic;font-weight:900;text-rendering:optimizeLegibility}@font-face{font-family:Roboto Mono;src:url(/assets/RobotoMono-Thin-QOAY5XYH.ttf) format("truetype");font-style:normal;font-weight:100;text-rendering:optimizeLegibility}@font-face{font-family:Roboto Mono;src:url(/assets/RobotoMono-ThinItalic-5GVOGY4S.ttf) format("truetype");font-style:italic;font-weight:100;text-rendering:optimizeLegibility}@font-face{font-family:Roboto Mono;src:url(/assets/RobotoMono-Light-VTQ6N36S.ttf) format("truetype");font-style:normal;font-weight:300;text-rendering:optimizeLegibility}@font-face{font-family:Roboto Mono;src:url(/assets/RobotoMono-LightItalic-G5AAPTRY.ttf) format("truetype");font-style:italic;font-weight:300;text-rendering:optimizeLegibility}@font-face{font-family:Roboto Mono;src:url(/assets/RobotoMono-Regular-ARDXJNA7.ttf) format("truetype");font-style:normal;font-weight:400;text-rendering:optimizeLegibility}@font-face{font-family:Roboto Mono;src:url(/assets/RobotoMono-Italic-647K25TK.ttf) format("truetype");font-style:italic;font-weight:400;text-rendering:optimizeLegibility}@font-face{font-family:Roboto Mono;src:url(/assets/RobotoMono-Medium-5WKJZGYD.ttf) format("truetype");font-style:normal;font-weight:500;text-rendering:optimizeLegibility}@font-face{font-family:Roboto Mono;src:url(/assets/RobotoMono-MediumItalic-KPQLT4EP.ttf) format("truetype");font-style:italic;font-weight:500;text-rendering:optimizeLegibility}@font-face{font-family:Roboto Mono;src:url(/assets/RobotoMono-Bold-R7W7VCW5.ttf) format("truetype");font-style:normal;font-weight:700;text-rendering:optimizeLegibility}@font-face{font-family:Roboto Mono;src:url(/assets/RobotoMono-BoldItalic-WFTVZD3Q.ttf) format("truetype");font-style:italic;font-weight:700;text-rendering:optimizeLegibility}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}body{color:#423737;font-family:Raleway,sans-serif}.l17xibil{display:inline-block;margin-right:20px}.itdx79y{border-radius:50%;-webkit-transition:.25s ease-in-out;transition:.25s ease-in-out;vertical-align:middle;width:100px}.itdx79y:hover{border-radius:25px}@media only screen and (max-width:360px){.itdx79y{margin-bottom:10px}}.c1qfwlep{background-color:#ff7e71;height:100px;margin-bottom:50px;padding:20px 0;text-align:center}@media only screen and (max-width:360px){.c1qfwlep{height:214px;margin-bottom:30px}}.ln9rjyh{color:#f9f0f0;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:.25s ease-in-out;transition:.25s ease-in-out}.ln9rjyh:hover{color:#fff}.na57eaq{font-size:20px;font-weight:600;margin:0}.i1hwzycd{display:inline-block;fill:#f9f0f0;-webkit-transition:.25s ease-in-out;transition:.25s ease-in-out}.i1hwzycd:hover{fill:#fff}.sn6nyr{display:inline-block}.s7xnbks{list-style-type:none;margin:0;padding:0}.s7xnbks .sn6nyr+.sn6nyr .i1hwzycd{margin-left:2px}.t1yh7e5i{display:inline-block;vertical-align:middle;text-align:left}@media only screen and (max-width:360px){.t1yh7e5i{display:block;text-align:center}}.ti4t854{font-size:16px;font-weight:400;margin:0}.m4i65rz{margin:0 auto 50px;max-width:720px;padding:0 20px}.aww63u2 p,.aww63u2 ul,.aww63u2 ol,.aww63u2 table{font-weight:200}.aww63u2 h1,.aww63u2 h2,.aww63u2 h3,.aww63u2 h4,.aww63u2 h5,.aww63u2 h6,.aww63u2 strong,.aww63u2 th{font-weight:600}.aww63u2 p{font-size:18px}.aww63u2 code{font-family:Roboto Mono,monospace;font-weight:400}.aww63u2 img{max-width:100%}.aww63u2 a{font-weight:500;color:#ff7e71;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:.25s ease-in-out;transition:.25s ease-in-out}.aww63u2 a:hover{color:#69d2e7}.aww63u2 pre{padding:15px;overflow-x:auto;background-color:#f9f0f0}.aww63u2 blockquote{margin:0;padding:5px 40px;border-left:3px solid #ff7e71;background-color:#f9f0f0}.aww63u2 blockquote p{margin:0}.aww63u2 table{display:block;max-width:100%;overflow-x:auto;border-collapse:collapse}.aww63u2 table thead{background-color:#f9f0f0}.aww63u2 table thead th{padding:5px 10px;border-bottom:3px solid #ff7e71;text-align:left}.aww63u2 table tbody tr:nth-child(even){background-color:#f9f0f0}.aww63u2 table tbody td{padding:5px 10px}.aww63u2 hr{border-top:3px dotted #ff7e71;border-bottom:none;border-left:none;border-right:none;margin:30px 30%}.aww63u2 .hljs-comment,.aww63u2 .hljs-quote{color:#999;font-style:italic}.aww63u2 .hljs-keyword,.aww63u2 .hljs-selector-tag,.aww63u2 .hljs-subst{color:#423737;font-weight:700}.aww63u2 .hljs-number,.aww63u2 .hljs-literal,.aww63u2 .hljs-variable,.aww63u2 .hljs-template-variable,.aww63u2 .hljs-tag .hljs-attr{color:#48909d}.aww63u2 .hljs-string,.aww63u2 .hljs-doctag{color:#ff7e71}.aww63u2 .hljs-title,.aww63u2 .hljs-section,.aww63u2 .hljs-selector-id{color:#d35e97;font-weight:700}.aww63u2 .hljs-subst{font-weight:400}.aww63u2 .hljs-type,.aww63u2 .hljs-class .hljs-title{color:#3558ca;font-weight:700}.aww63u2 .hljs-tag,.aww63u2 .hljs-name,.aww63u2 .hljs-attribute{color:#092274;font-weight:400}.aww63u2 .hljs-regexp,.aww63u2 .hljs-link{color:#99cf42}.aww63u2 .hljs-symbol,.aww63u2 .hljs-bullet{color:#d35e97}.aww63u2 .hljs-built_in,.aww63u2 .hljs-builtin-name{color:#44c0d7}.aww63u2 .hljs-meta{color:#999;font-weight:700}.aww63u2 .hljs-deletion{background:#ffdddd}.aww63u2 .hljs-addition{background:#ddffdd}.aww63u2 .hljs-emphasis{font-style:italic}.aww63u2 .hljs-strong{font-weight:700}.t104g642{color:#ff7e71;font-size:16px;font-style:italic;font-weight:400}</style></head><body><header class="c1qfwlep"><a href="/" class="l17xibil"><img alt="avatar" src="/assets/Avatar-2KA5T3BV.jpg" class="itdx79y"/></a><div class="t1yh7e5i"><h4 class="na57eaq">Huy Dang Lê-Ngô</h4><h5 class="ti4t854">Senior Front-End Engineer <a href="https://slack.com" title="Slack" class="ln9rjyh">@Slack</a></h5><ol class="s7xnbks"><li class="sn6nyr"><a href="https://www.linkedin.com/in/dilatorily" title="LinkedIn" class="i1hwzycd"><svg height="20" viewBox="0 0 1792 1792" width="20"><path d="M349 911v-991h-330v991h330zM370 1217q1 -73 -50.5 -122t-135.5 -49h-2q-82 0 -132 49t-50 122q0 74 51.5 122.5t134.5 48.5t133 -48.5t51 -122.5zM1536 488v-568h-329v530q0 105 -40.5 164.5t-126.5 59.5q-63 0 -105.5 -34.5t-63.5 -85.5q-11 -30 -11 -81v-553h-329 q2 399 2 647t-1 296l-1 48h329v-144h-2q20 32 41 56t56.5 52t87 43.5t114.5 15.5q171 0 275 -113.5t104 -332.5z" transform="scale(1,-1) translate(0,-1536)"></path></svg></a></li><li class="sn6nyr"><a href="https://github.com/Dilatorily" title="GitHub" class="i1hwzycd"><svg height="20" viewBox="0 0 1792 1792" width="20"><path d="M768 1408q209 0 385.5 -103t279.5 -279.5t103 -385.5q0 -251 -146.5 -451.5t-378.5 -277.5q-27 -5 -40 7t-13 30q0 3 0.5 76.5t0.5 134.5q0 97 -52 142q57 6 102.5 18t94 39t81 66.5t53 105t20.5 150.5q0 119 -79 206q37 91 -8 204q-28 9 -81 -11t-92 -44l-38 -24 q-93 26 -192 26t-192 -26q-16 11 -42.5 27t-83.5 38.5t-85 13.5q-45 -113 -8 -204q-79 -87 -79 -206q0 -85 20.5 -150t52.5 -105t80.5 -67t94 -39t102.5 -18q-39 -36 -49 -103q-21 -10 -45 -15t-57 -5t-65.5 21.5t-55.5 62.5q-19 32 -48.5 52t-49.5 24l-20 3q-21 0 -29 -4.5 t-5 -11.5t9 -14t13 -12l7 -5q22 -10 43.5 -38t31.5 -51l10 -23q13 -38 44 -61.5t67 -30t69.5 -7t55.5 3.5l23 4q0 -38 0.5 -88.5t0.5 -54.5q0 -18 -13 -30t-40 -7q-232 77 -378.5 277.5t-146.5 451.5q0 209 103 385.5t279.5 279.5t385.5 103zM291 305q3 7 -7 12 q-10 3 -13 -2q-3 -7 7 -12q9 -6 13 2zM322 271q7 5 -2 16q-10 9 -16 3q-7 -5 2 -16q10 -10 16 -3zM352 226q9 7 0 19q-8 13 -17 6q-9 -5 0 -18t17 -7zM394 184q8 8 -4 19q-12 12 -20 3q-9 -8 4 -19q12 -12 20 -3zM451 159q3 11 -13 16q-15 4 -19 -7t13 -15q15 -6 19 6z M514 154q0 13 -17 11q-16 0 -16 -11q0 -13 17 -11q16 0 16 11zM572 164q-2 11 -18 9q-16 -3 -14 -15t18 -8t14 14z" transform="scale(1,-1) translate(0,-1536)"></path></svg></a></li><li class="sn6nyr"><a href="https://twitter.com/Dagneau" title="Twitter" class="i1hwzycd"><svg height="20" viewBox="0 0 1792 1792" width="20"><path d="M1620 1128q-67 -98 -162 -167q1 -14 1 -42q0 -130 -38 -259.5t-115.5 -248.5t-184.5 -210.5t-258 -146t-323 -54.5q-271 0 -496 145q35 -4 78 -4q225 0 401 138q-105 2 -188 64.5t-114 159.5q33 -5 61 -5q43 0 85 11q-112 23 -185.5 111.5t-73.5 205.5v4q68 -38 146 -41 q-66 44 -105 115t-39 154q0 88 44 163q121 -149 294.5 -238.5t371.5 -99.5q-8 38 -8 74q0 134 94.5 228.5t228.5 94.5q140 0 236 -102q109 21 205 78q-37 -115 -142 -178q93 10 186 50z" transform="scale(1,-1) translate(0,-1536)"></path></svg></a></li></ol></div></header><main class="m4i65rz"><h3 class="t104g642">Thursday, August 18th, 2016</h3><article class="aww63u2"><h1 id="bundling-assets-with-webpack">Bundling assets with Webpack</h1>
<p>As a developer, sharing code with others is one of the most crucial aspect of our work. That is why using modules in our code is useful, as it creates small and manageable packages that can be share throughout our applications and across teams and individuals.</p>
<p>In the JavaScript world, there are multiple module formats that were conceived to solve different problems. However, different formats lead to a lot of friction when we are trying to glue our modules together. Module bundlers such as <a href="http://browserify.org">Browserify</a> and <a href="http://jspm.io">jspm</a> were conceived to simplify that process. We will be using <a href="http://webpack.github.io">Webpack</a> for our application because it has certain features that makes it more desirable compared to other module bundlers.</p>
<hr/>
<p>Starting with the code from the <a href="/posts/2016-07-18">last post</a>, we will need to install Webpack as a dependency to our application. Webpack will automatically use the file <code>webpack.config.js</code> as its configuration file. Thus, we will need to also create it.</p>
<pre><code class="language-shell">$ npm i -D webpack
$ touch webpack.config.js
</code></pre>
<p>The Webpack configuration file is fairly overwhelming, so let&#x27;s break down every part of it. First, to be used by Webpack itself, it needs to export a JavaScript object literal under the <a href="https://github.com/commonjs/commonjs">CommonJS</a> format. The CommonJS module format implemented in Node.js is fairly simple. We import and export modules by using the following constructs.</p>
<pre><code class="language-javascript">// Importing modules
const nodeJsModule = require(&#x27;name-of-package&#x27;);
const relativeModule = require(&#x27;./relative/path/to/file.js&#x27;);

// Exporting modules
module.exports = moduleToExport;
</code></pre>
<p>Therefore, the content of the <code>webpack.config.js</code> file should contain the following code.</p>
<pre><code class="language-javascript">module.exports = {
    // Rest of the Webpack configuration object
};
</code></pre>
<hr/>
<p>Webpack works by creating a dependency tree from the entry files, and it bundles them up together in a bundle file. It is also smart enough to split the bundle in multiple files when certain parts should be loaded asynchronously.</p>
<p>Thus, the <code>entry</code> attribute of the configuration object should describe what files to bundle together for our application. Since we don&#x27;t have a JavaScript entry point for the client code, we should create a <code>src/application.js</code> file.</p>
<pre><code class="language-shell">$ touch src/application.js
</code></pre>
<p>Let&#x27;s also modify our <code>src/index.html</code> file accordingly.</p>
<pre><code class="language-diff">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;Agate&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
-        &lt;h1&gt;Hello, World!&lt;/h1&gt;
+        &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Finally, we want to show that the file is loaded properly. We can tell it to create an <code>&lt;h1&gt;</code> node that contains a string to show that it is working properly.</p>
<pre><code class="language-javascript">const rootNode = document.getElementById(&#x27;root&#x27;);
const headingNode = document.createElement(&#x27;h1&#x27;);
const greetings = document.createTextNode(&#x27;Hello, World!&#x27;);

headingNode.appendChild(greetings);
rootNode.appendChild(headingNode);
</code></pre>
<p>Now that we have an entry file, we can fill the <a href="https://webpack.github.io/docs/configuration.html#entry"><code>entry</code></a> attribute of the Webpack configuration file!</p>
<pre><code class="language-diff">module.exports = {
+    entry: &#x27;./src/application.js&#x27;
};
</code></pre>
<hr/>
<p>Even though we have an <code>entry</code> attribute, Webpack will not be able to output the bundle if the <a href="https://webpack.github.io/docs/configuration.html#output"><code>output</code></a> object is not present in the configuration file. For our case, we will only need 2 attributes, <code>path</code> and <code>filename</code>, in the <code>output</code> object.</p>
<pre><code class="language-diff">module.exports = {
-    entry: &#x27;./src/application.js&#x27;
+    entry: &#x27;./src/application.js&#x27;,
+    output: {
+        path: &#x27;dist&#x27;,
+        filename: &#x27;[name].[hash].js&#x27;
+    }
};
</code></pre>
<p>The more astute of you will realize that we are not currently referencing the <code>application.js</code> file in the <code>index.html</code> file, so we will not be displaying anything yet. You would be right to think so! Let&#x27;s fix that.</p>
<p>Webpack has a fairly large ecosystem of plugins. One of the more interesting one is <code>html-webpack-plugin</code>. That plugin let&#x27;s us inject the generated bundle files inside of an HTML file. We would then need to install it as a dependency of our project.</p>
<pre><code class="language-shell">$ npm i -D html-webpack-plugin
</code></pre>
<p>Next, we will need to modify the <code>webpack.config.js</code> file to indicate in which HTML file Webpack should inject the bundle and its location. We do so by adding an entry in the <a href="https://webpack.github.io/docs/using-plugins.html"><code>plugins</code></a> attribute.</p>
<pre><code class="language-diff">+const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
+
module.exports = {
    entry: &#x27;./src/application.js&#x27;,
    output: {
        path: &#x27;dist&#x27;,
        filename: &#x27;[name].[hash].js&#x27;
-    }
+    },
+    plugins: [
+        new HtmlWebpackPlugin({
+            template: &#x27;src/index.html&#x27;,
+            inject: &#x27;body&#x27;
+        })
+    ]
};
</code></pre>
<p>Finally, to use Webpack as part of our build process, let&#x27;s modify our NPM <code>build</code> script in the <code>package.json</code> file to use the Webpack CLI.</p>
<pre><code class="language-diff">&quot;scripts&quot;: {
    &quot;clean&quot;: &quot;rimraf dist&quot;,
    &quot;prebuild&quot;: &quot;npm run clean&quot;,
-    &quot;build&quot;: &quot;babel src -d dist &amp;&amp; cp src/index.html dist&quot;,
+    &quot;build&quot;: &quot;babel src -d dist &amp;&amp; webpack&quot;,
    &quot;prestart&quot;: &quot;npm run build&quot;,
    &quot;start&quot;: &quot;electron dist&quot;
},
</code></pre>
<hr/>
<p>Webpack has a few more features that pushes it from useful to really interesting. One of them is that Webpack overloads the <code>require</code> function from the CommonJS module format to be able to load other file formats than JavaScript files. Indeed, we can load other type of files such as CSS and images. Then, as Webpack loads those files, it can preprocess them and transform them. For now, let&#x27;s preprocess all of our JavaScript files to be transpiled by Babel using <code>babel-loader</code>.</p>
<pre><code class="language-shell">$ npm i -D babel-loader
</code></pre>
<p>We must also configure Webpack to preprocess the JavaScript by adding the <code>babel-loader</code> in the <code>module.loaders</code> attribute.</p>
<pre><code class="language-diff">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);

module.exports = {
    entry: &#x27;./src/application.js&#x27;,
    output: {
        path: &#x27;dist&#x27;,
        filename: &#x27;[name].[hash].js&#x27;
    },
    plugins: [
        new HtmlWebpackPlugin({
            template: &#x27;src/index.html&#x27;,
            inject: &#x27;body&#x27;
        })
-    ]
+    ],
+    module: {
+        loaders: [
+            {
+                test: /\.js$/,
+                loader: &#x27;babel&#x27;,
+                exclude: /node_modules/
+            }
+        ]
+    }
}
</code></pre>
<p>The <code>test</code> attribute corresponds to a regular expression that will match all the files it must preprocess. The <code>loader</code> attribute specifies which loader to be used. Note that we can omit the <code>-loader</code> part of <code>babel-loader</code>. Finally, the <code>exclude</code> attribute is used to ignore certain files, specially the ones coming from the <code>node_modules</code> folder.</p>
<hr/>
<p>Similarly to what we just did, we can create another Webpack configuration file to process the main Electron files. We&#x27;ll start by creating the <code>webpack.config.electron.js</code> file.</p>
<pre><code class="language-shell">$ touch webpack.config.electron.js
</code></pre>
<p>Using the same process as we went through before, we should end up with a <code>webpack.config.electron.js</code> file that looks similar to the following one.</p>
<pre><code>module.exports = {
    entry: {
        index: &#x27;./src/index.js&#x27;
    },
    output: {
        path: &#x27;dist&#x27;,
        filename: &#x27;[name].js&#x27;
    },
    module: {
        loaders: [
            {
                test: /\.js$/,
                loader: &#x27;babel&#x27;,
                exclude: /node_modules/
            }
        ]
    }
};
</code></pre>
<p>However, there are some last parts that are missing to make this configuration file working with Electron. Those changes are described by the following diff.</p>
<pre><code class="language-diff">module.exports = {
    entry: {
        index: &#x27;./src/index.js&#x27;
    },
    output: {
        path: &#x27;dist&#x27;,
        filename: &#x27;[name].js&#x27;
    },
    module: {
        loaders: [
            {
                test: /\.js$/,
                loader: &#x27;babel&#x27;,
                exclude: /node_modules/
            }
        ]
-    }
+    },
+    node: {
+        __dirname: false // Tell webpack to not mock or polyfill the __dirname variable
+    },
+    target: &#x27;electron&#x27; // We are using this file with Electron
};
</code></pre>
<p>Finally, we can update our NPM <code>build</code> script to use Webpack to build both parts of our application.</p>
<pre><code class="language-diff">&quot;scripts&quot;: {
    &quot;clean&quot;: &quot;rimraf dist&quot;,
    &quot;prebuild&quot;: &quot;npm run clean&quot;,
-    &quot;build&quot;: &quot;babel src -d dist &amp;&amp; webpack&quot;,
+    &quot;build&quot;: &quot;webpack --config webpack.config.electron.js &amp;&amp; webpack&quot;,
    &quot;prestart&quot;: &quot;npm run build&quot;,
    &quot;start&quot;: &quot;electron dist&quot;
},
</code></pre>
<p>Since we stopped using <code>babel-cli</code> to transpile our application, we can also remove it using the following command.</p>
<pre><code class="language-shell">npm uninstall -D babel-cli
</code></pre>
<p>Just like the <code>install</code> command, the <code>uninstall</code> command has a shortcut, <code>un</code>. Thus, the command above can be rewritten as the following one.</p>
<pre><code class="language-shell">npm un -D babel-cli
</code></pre>
<hr/>
<p>Adding Webpack in our application might not look too beneficial at this point. However, the benefits will become more obvious as we move along in the development of the application. In the next post, I will be reorganizing the code base to make it future-proof, adding <a href="http://eslint.org">ESLint</a> to use a standard coding style and adding unit tests to validate the application.</p>
<p>The code created in this post is available <a href="https://github.com/Dilatorily/agate/tree/2016-08-18">here</a>.</p>
</article></main><link href="/assets/styles.660120b3b0d8beaef3c4d1f63b1b1f8d.css" rel="stylesheet"/></body></html>